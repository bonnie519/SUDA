<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	
	

   
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/tree.jquery.js"></script>
    <link rel="stylesheet" href="css/jqtree.css">
    <script src="js/jquery.cookie.js"></script>
  	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=LnyRpG5KzEHzzsvz4Hx8ICTv"></script>
  	<script type="text/javascript" src="http://api.map.baidu.com/library/DistanceTool/1.2/src/DistanceTool_min.js"></script>
  	<link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/my.css">
    <style type="text/css">
	body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
	</style>
    <title></title>
</head>
<body>
<!--LnyRpG5KzEHzzsvz4Hx8ICTv  26.336164,52.030018-->


    
<div id="allmap"></div>

<!--<div class="collapse navbar-collapse" id="example-navbar-collapse">
<ul class="nav navbar-nav">
<li><a href="#">iOS</a></li>
<li><a href="#">SVN</a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">
Java <b class="caret"></b>
</a>
<ul class="dropdown-menu">
<li><a href="#">jmeter</a></li>
<li><a href="#">EJB</a></li>
<li class="divider">
<li><a href="#">分离的链接</a></li>
</ul>
</li>
</ul>
</div>-->	








</body>
</html>
<script type="text/javascript">

   // 百度地图API功能


        var map = new BMap.Map("allmap");    // 创建Map实例
        var inipoint=new BMap.Point(120.64,31.3);//120.64,31.3
        map.centerAndZoom(inipoint,12);  // 初始化地图,设置中心点坐标和地图级别
        map.addControl(new BMap.MapTypeControl());   //添加地图类型控件
        map.setCurrentCity("苏州");          // 设置地图显示的城市 此项是必须设置的
        map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
       // var icon=new BMap.Icon("img/greenbike.png");
		


    /*缩放控件type有四种类型:
     BMAP_NAVIGATION_CONTROL_SMALL：仅包含平移和缩放按钮；BMAP_NAVIGATION_CONTROL_PAN:仅包含平移按钮；BMAP_NAVIGATION_CONTROL_ZOOM：仅包含缩放按钮*/
    var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_TOP_LEFT});// 左上角，添加比例尺
    var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件
    var top_right_navigation = new BMap.NavigationControl({anchor: BMAP_ANCHOR_TOP_RIGHT, type: BMAP_NAVIGATION_CONTROL_SMALL}); //右上角，仅包含平移和缩放按钮
    var points=new Array();//=new points();
    points[0]=new BMap.Point(120.646014,31.315248);
    points[1]=new BMap.Point(120.634858,31.296536);
    points[2]=new BMap.Point(120.63143,31.308685);
    //points[3]=new BMap.Point(120.643395,31.273815);
    //points[4]=new BMap.Point(120.802252,31.638943);
    //points[5]=new BMap.Point(120.742349,31.318765);
    //points[6]=new BMap.Point(120.689711,31.350303);
    //points[7]=new BMap.Point(120.85708,31.392828);
    //points[8]=new BMap.Point(120.617189,31.387348);
    //points[9]=new BMap.Point(120.560462,31.273984);
    //points[0]=new BMap.Point(120.646014,31.315248);
    //points[0]=new BMap.Point(120.646014,31.315248);
    //points[0]=new BMap.Point(120.646014,31.315248);
    //points[0]=new BMap.Point(120.646014,31.315248);
    //alert(points[0].toString());
    var aicon = new BMap.Icon('img/mapm.png', new BMap.Size(30,39),{
    	anchor:new BMap.Size(16,39),infoWindowAnchor:new BMap.Size(16,0)}
    );
    var bicon=new BMap.Icon('img/dot.png', new BMap.Size(30,39),{
    	anchor:new BMap.Size(16,39),infoWindowAnchor:new BMap.Size(16,0)}
    );
    var cicon=new BMap.Icon('img/orng.png', new BMap.Size(30,39),{
    	anchor:new BMap.Size(16,39),infoWindowAnchor:new BMap.Size(16,0)}
    );
    var mkr=new Array();
   
    //var st="<s:property value="bikenoinfo['0001'].state" />";
   
    for(i=0;i<3;i++) {
  // if (st.value=="bikenoinfo['000"+i+1+"'].state";
    //mkr[i]=new BMap.Marker(points[i],{icon:micon});//, {icon: micon}
        mkr[i]=new BMap.Marker(points[i],{icon:aicon});
        map.addOverlay(mkr[i]);
    }
    map.setViewport(points);         //调整地图的最佳视野为显示标注数组point

    var opts0={title:'<span style="font-size:14px;color:#0A8021">[2001] 苏大本部</span>'};
    var opts1={title:'<span style="font-size:14px;color:#0A8021">普信达苏州公共自行车有限公司</span>'};
    var opts2={title:'<span style="font-size:14px;color:#0A8021">吴中区公共自行车</span>'};
    var opts3={title:'<span style="font-size:14px;color:#0A8021">公共自行车租赁点</span>'};
    var opts4={title:'<span style="font-size:14px;color:#0A8021">欧典花园北门西站公共自行车</span>'};
    var opts5={title:'<span style="font-size:14px;color:#0A8021">公共自行车租赁点</span>'};
    var opts6={title:'<span style="font-size:14px;color:#0A8021">公共自行车借用点</span>'};
    var opts7={title:'<span style="font-size:14px;color:#0A8021">公共自行车租赁点</span>'};
    var opts8={title:'<span style="font-size:14px;color:#0A8021">吴中区公共自行车</span>'};
    var opts9={title:'<span style="font-size:14px;color:#0A8021">公共自行车办卡点</span>'};
    //var opts0={title:'<span style="font-size:14px;color:#0A8021">苏州大学-北门</span>'};
    //var opts0={title:'<span style="font-size:14px;color:#0A8021">苏州大学-北门</span>'};
    var infoWindow=new Array();
    infoWindow[0] =new BMap.InfoWindow("<div style='line-height:1.5em;font-size:12px;'>" +
            "可借"+"<s:property value="bikenoinfo['0001'].rentable" />"+"辆， 可还：辆<br/><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts0);  // 创建信息窗口对象，引号里可以书写任意的html语句。
    infoWindow[1] =new BMap.InfoWindow("<div style='line-height:1.8em;font-size:12px;'>" +
            "可借"+" <s:property value="bikenoinfo['0003'].rentable" />"+"辆， 可还：<s:property value="bikenoinfo['0003'].returnable" />"+"辆<br/><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts1);
    infoWindow[2] =new BMap.InfoWindow("<div style='line-height:1.8em;font-size:12px;'>" +
            "可借"+" <s:property value="bikenoinfo['0004'].rentable" />"+"辆， 可还：<s:property value="bikenoinfo['0004'].returnable" />"+"辆<br/><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts2);
    infoWindow[3] =new BMap.InfoWindow("<div style='line-height:1.8em;font-size:12px;'>" +
            "<b>地址:</b>苏州市吴中区</br><b>电话:</b>(0512)65113180</br><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts3);
    infoWindow[4] =new BMap.InfoWindow("<div style='line-height:1.8em;font-size:12px;'>" +
            "<b>地址:</b>苏州市常熟市</br><b>电话:</b>(0512)65113180</br><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts4);
    infoWindow[5] =new BMap.InfoWindow("<div style='line-height:1.8em;font-size:12px;'>" +
            "<b>地址:</b>苏州市吴中区</br><b>电话:</b>(0512)65113180</br><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts5);
    infoWindow[6] =new BMap.InfoWindow("<div style='line-height:1.8em;font-size:12px;'>" +
            "<b>地址:</b>苏州市吴中区</br><b>电话:</b>(0512)65113180</br><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts6);
    infoWindow[7] =new BMap.InfoWindow("<div style='line-height:1.8em;font-size:12px;'>" +
            "<b>地址:</b>苏州市昆山市</br><b>电话:</b>(0512)65113180</br><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts7);
    infoWindow[8] =new BMap.InfoWindow("<div style='line-height:1.8em;font-size:12px;'>" +
            "<b>地址:</b>苏州市相城区</br><b>电话:</b>(0512)65113180</br><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts8);
    infoWindow[9] =new BMap.InfoWindow("<div style='line-height:1.8em;font-size:12px;'>" +
            "<b>地址:</b>苏州市吴中区</br><b>电话:</b>(0512)65113180</br><b>口碑：</b>" +
            "<a style='text-decoration:none;color:#2679BA;float:right' href='#'>详情>></a></div>", opts9);

    //利用闭包正确处理循环marker
    for (i =0; i <3; i ++) {
     (function() {
         var index = i;
         mkr[i].addEventListener('click', function () {
             this.openInfoWindow(infoWindow[index]);
            // document.getElementById("s"+index).style.background="";
         });
     })();
     }
     
   for(i=0;i<3;i++)
	{
	 (function() {
         var index = i;
         var listn=document.getElementById("s"+index);
         listn.addEventListener("click", function () {
             //alert("I am "+index);
             //this.style.background="#FFFF99";
             
             map.openInfoWindow(infoWindow[index],points[index]);
         });
     })();
	/*var listn=document.getElementById(""+i);
	listn.addEventListener("onclick",showinfo(i));*/
	} 
  	function mylocation(){
  	var geolocation = new BMap.Geolocation();
	geolocation.getCurrentPosition(function(r){
		if(this.getStatus() == BMAP_STATUS_SUCCESS){
			var mk = new BMap.Marker(r.point);
			map.addOverlay(mk);
			map.panTo(r.point);
			alert('您的位置：'+r.point.lng+','+r.point.lat);
		}
		else {
			alert('failed'+this.getStatus());
		}        
	},{enableHighAccuracy: true})
	//关于状态码
	//BMAP_STATUS_SUCCESS	检索成功。对应数值“0”。
	//BMAP_STATUS_CITY_LIST	城市列表。对应数值“1”。
	//BMAP_STATUS_UNKNOWN_LOCATION	位置结果未知。对应数值“2”。
	//BMAP_STATUS_UNKNOWN_ROUTE	导航结果未知。对应数值“3”。
	//BMAP_STATUS_INVALID_KEY	非法密钥。对应数值“4”。
	//BMAP_STATUS_INVALID_REQUEST	非法请求。对应数值“5”。
	//BMAP_STATUS_PERMISSION_DENIED	没有权限。对应数值“6”。(自 1.1 新增)
	//BMAP_STATUS_SERVICE_UNAVAILABLE	服务不可用。对应数值“7”。(自 1.1 新增)
	//BMAP_STATUS_TIMEOUT	超时。对应数值“8”。(自 1.1 新增)
	}
    //添加控件和比例尺
    function add_control(){

        map.addControl(top_left_control);
        map.addControl(top_left_navigation);
        map.addControl(top_right_navigation);
    }
 	function pan(){
 	
		map.panTo(new BMap.Point("常州市钟楼区"));   //两秒后移动到广州
	
 	}
 	function reload()
 	{
 		window.location.reload();
 	}
</script>
